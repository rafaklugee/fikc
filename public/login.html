<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Login</title>
	<!-- Favicon -->
	<link rel="icon" type="image/x-icon" href="assets/favicon.jpg" />
	<!-- Google fonts -->
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />
	<style>
		body {
			font-family: "Montserrat", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
			background-image: linear-gradient(90deg, #ffdb00, #000);
		}
		input {
			padding: 10px;
			border: none;
			outline: none;
		}
		button {
			background-color: #ffdb00;
			border: none;
			padding: 10px;
			width: 100%;
			border-radius: 15px;
			color: #fff;
		}
		button:hover {
			background-color: #ffe74c;
			cursor: pointer;
		}
		.container-login {
			background-color: rgba(0, 0, 0, 0.8);
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			padding: 40px;
			border-radius: 15px;
			color: #fff;
			text-align: center;
		}


	</style>
</head>
<body>
	<div class="container-login">
		<h1>Login</h1>
		<form id="loginForm">
		<input type="text" placeholder="Usuário" id='username' required>
		<br><br>
		<input type="password" placeholder="Senha" id='password' required>
		<br><br>
		<button type="submit">Entrar</button>
		</form>
	</div>

	<script>
        document.getElementById("loginForm").addEventListener("submit", async function(e) {
            e.preventDefault();

            // Obter os valores dos campos
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;
            
            console.log("Tentando login com", username, password); // Adicionando log para depuração

            try {
                // Enviar a requisição POST para a API de login
                const response = await fetch("https://fikc.onrender.com/api/login", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ username, password })
                });

                // Verificar o resultado da requisição
                const result = await response.json();
                console.log("Resultado da API:", result); // Adicionando log para depuração

                if (response.ok) {
                    // Redirecionar para a página cliente.html após login bem-sucedido
                    window.location.href = "https://fikc.onrender.com/cliente.html";
                } else {
                    alert(result.error || "Erro ao fazer login");
                }
            } catch (error) {
                // Capturar e exibir qualquer erro
                console.error("Erro ao fazer login:", error);
                alert("Erro ao fazer login. Tente novamente.");
            }
        });
    </script>
</body>
</html>
